(def nft-shop
  (deploy
   '(do
      (def counter 0)

      (def selling {})

      (defn for-sale []
        selling)

      (defn sell [listing]
        (let [id counter]
          (def selling (assoc selling id listing))

          (def counter (inc counter))

          id))

      (export for-sale sell))))