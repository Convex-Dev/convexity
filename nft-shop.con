(def nft-shop
  (deploy
   '(do
      (def counter 0)

      (def for-sale {})

      (defn sell [listing]
        (let [id counter]
          (def for-sale (assoc for-sale id listing))

          (def counter (inc counter))

          id))

      (export for-sale sell))))