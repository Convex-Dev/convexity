(def nft-market
  (deploy
   '(do
      (def counter 0)

      (def -for-sale {})

      (defn for-sale []
        -for-sale)

      (defn sell [listing]
        (let [id (inc counter)]
          (def -for-sale (assoc -for-sale id listing))

          (def counter id)

          id))

      (export for-sale sell))))